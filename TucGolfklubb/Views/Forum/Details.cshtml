@model TucGolfklubb.Models.Forum

@{
    ViewData["Title"] = "Details";
}

<h1>@Model.Title</h1>
<p>@Model.Description</p>

<h3>Inlägg</h3>
@if (Model.Posts != null && Model.Posts.Any())
{
    <ul>
        @foreach (var post in Model.Posts)
        {
            <li style="margin-bottom: 1rem;">
                <a asp-controller="ForumPosts" asp-action="Details" asp-route-id="@post.Id">
                    @post.Content
                </a><br />

                <span style="margin-left: 1rem;">
                    av @(post.User?.UserName ?? "Okänd användare") |
                    @post.PostedAt.ToString("yyyy-MM-dd HH:mm")

                    @if (User.Identity?.IsAuthenticated == true && User.Identity.Name == post.User?.UserName)
                    {
                        <span style="font-style: italic; margin-left: 2rem;">
                            <a asp-controller="ForumPosts" asp-action="Edit" asp-route-id="@post.Id">edit</a> |
                            <a asp-controller="ForumPosts" asp-action="Delete" asp-route-id="@post.Id">delete</a>
                        </span>
                    }
                </span>
            </li>
        }
    </ul>
}
else
{
    <p>Inga inlägg ännu.</p>
}

<!-- Link to create a new post for this forum -->
<a asp-controller="ForumPosts"
   asp-action="Create"
   asp-route-forumId="@Model.Id"
   class="btn btn-success">
    Skapa nytt inlägg
</a>

<div>
    <a asp-action="Edit" asp-route-id="@Model.Id">Edit Forum</a> |
    <a asp-action="Index">Back to Forums</a>
</div>