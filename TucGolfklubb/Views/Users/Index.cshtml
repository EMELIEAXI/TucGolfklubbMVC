@model List<UserProfileViewModel>

@{
    ViewData["Title"] = "Användare";
}

<div class="container mt-5 pt-5">
    <h2>Alla användare</h2>

    <ul class="list-group">
        @foreach (var user in Model)
        {
            <li class="list-group-item flex-column align-items-start">
                <div class="d-flex justify-content-between align-items-center">
                    <span>
                        @{
                            var name = user?.FullName;

                            if (user == null)
                            {
                                name = "Okänd användare";
                            }
                            else if ((user.Email?.ToLower() ?? "") == "admin@golfklubb.se")
                            {
                                name = "Admin";
                            }
                        }
                        <strong>@name</strong>
                    </span>

                    @if (user != null)
                    {
                        <button class="btn btn-sm btn-primary" type="button"
                                data-bs-toggle="collapse" data-bs-target="#collapse-@user.Id"
                                aria-expanded="false" aria-controls="collapse-@user.Id">
                            Visa 
                        </button>
                    }
                </div>

                @if (user != null)
                {
                    <div class="collapse w-100 mt-2" id="collapse-@user.Id">
                        @await Html.PartialAsync("_UserProfilePartial", user)
                    </div>
                }
            </li>
        }
    </ul>
</div>
